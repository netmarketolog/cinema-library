{"mappings":"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","sources":["src/my-library.js","src/js/local-storage/libraryCard.js","src/js/api/libraryPagination.js","src/js/local-storage/libraryStorage.js"],"sourcesContent":["import './js/theme-switch';\nimport './js/scroll-to-top';\n\nimport './js/local-storage/libraryStorage';\nimport './js/modal-film';\n\n// import filmsMarkup from './js/local-storage/libraryCard';\n\n// filmsMarkup();\n","import getRefs from '../getRefs';\nconst refs = getRefs();\n\nexport default function filmsMarkup(film) {\n  const genres = getGenresOfFilm(film);\n  refs.popularFilmsList.insertAdjacentHTML(\n    'afterbegin',\n    ` <li class=\"card__item\" id=${film.id}>\n        <a class=\"card__link\" id=\"429473\" href=\"#\">\n          <img\n            src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\"\n            alt=\"${film.original_title}\"\n            class=\"card__poster\"\n          />\n\n          <h2 class=\"card__title\">${film.original_title}</h2>\n          <div class=\"card__wrap\">\n            <p class=\"card__description\">${genres} | ${film.release_date.slice(\n      0,\n      4\n    )}</p>\n            <p class=\"card__rating\">${film.vote_average.toFixed(1)}</p>\n          </div>\n        </a>\n      </li>`\n  );\n  function getGenresOfFilm(film) {\n    return film.genres.map(genres => genres.name).join(', ');\n  }\n}\n","import createPagination from './pagination';\nimport getRefs from '../getRefs';\n\nconst refs = getRefs();\n\nexport default function addPagination(array) {\n  const totalPages = Math.ceil(array.length / 20);\n  let page = 1;\n  let films = array.slice(20 * page - 20, 20 * page);\n  renderMarkupByPageOfLibrary(films);\n\n  refs.paginationEl.innerHTML = createPagination(totalPages, page);\n  refs.paginationEl.addEventListener('click', onPageBtnClick);\n\n  function onPageBtnClick(e) {\n    const _page = e.target.closest('li.numb');\n    if (!_page) return;\n\n    // refs.spinner.classList.remove('is-hidden');\n    refs.spinner.classList.remove('is-hidden');\n    page = Number(_page.id);\n    films = array.slice(20 * page - 20, 20 * page);\n    setTimeout(() => {\n      window.scrollTo({\n        top: 0,\n      });\n      renderMarkupByPageOfLibrary(films);\n      refs.spinner.classList.add('is-hidden');\n    }, 400);\n    // refs.spinner.classList.add('is-hidden');\n\n    refs.paginationEl.innerHTML = createPagination(totalPages, page);\n  }\n}\n\nfunction renderMarkupByPageOfLibrary(films) {\n  const markup = films\n    .map(film => {\n      const genres = getGenresOfFilm(film);\n      return `<li class=\"card__item\" id=${film.id}>\n        <a class=\"card__link\" id=\"429473\" href=\"#\">\n        ${\n          film.poster_path\n            ? `<img src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=\"${film.original_title}\" class=\"card__poster\" />`\n            : `<img src=\"${noImage}\" alt=\"${film.original_title}\" class=\"card__poster\" />`\n        }\n          <h2 class=\"card__title\">${film.title || film.original_title}</h2>\n          <div class=\"card__wrap\">\n            <p class=\"card__description\">${genres} | ${\n        film.release_date ? film.release_date.slice(0, 4) : 'none'\n      }</p>\n            <p class=\"card__rating\">${film.vote_average.toFixed(1)}</p>\n          </div>\n        </a>\n      </li>`;\n    })\n    .join('');\n  refs.popularFilmsList.innerHTML = markup;\n}\n\nfunction getGenresOfFilm(film) {\n  return film.genres.map(genres => genres.name).join(', ');\n}\n","import filmsMarkup from './libraryCard';\nimport getRefs from '../getRefs';\nimport closeModal from '../modal-film';\nimport '../modal-film';\nimport '../local-storage/addToLStorage';\nimport addPagination from '../api/libraryPagination';\nconst refs = getRefs();\n\nonQueueVideo();\nrefs.watchedBtn.addEventListener('click', onWatchedVideo);\nrefs.queueBtn.addEventListener('click', onQueueVideo);\n\nlet watched = [];\nlet queue = [];\nlet addWatched = [];\nlet addQueue = [];\nconst savedQueueFilm = localStorage.getItem('queue');\nconst parsedQueueFilm = JSON.parse(savedQueueFilm);\nparsedQueueFilm.map(muvieId => {\n  queue.push(muvieId);\n  addWatched.push(muvieId);\n});\n\nconst savedWotchedFilm = localStorage.getItem('watched');\nconst parsedWotchedFilm = JSON.parse(savedWotchedFilm);\nparsedWotchedFilm.map(muvieId => {\n  watched.push(muvieId);\n  addQueue.push(muvieId);\n});\n\nfunction onWatchedVideo() {\n  refs.watchedBtn.setAttribute('disabled', true);\n  refs.queueBtn.removeAttribute('disabled');\n  refs.addToWatchedBtn.textContent = 'Remove from Watched';\n  refs.addToQueueBtn.textContent = 'Add to Queue';\n  refs.addToQueueBtn.removeEventListener('click', onDeleteQueue);\n  refs.addToWatchedBtn.removeEventListener('click', addToWatched);\n  refs.addToWatchedBtn.addEventListener('click', onDeleteWatched);\n  refs.addToQueueBtn.addEventListener('click', addToQueue);\n  refs.queueBtn.classList.remove('is-active');\n  refs.watchedBtn.classList.add('is-active');\n  onRemoveQueue();\n  refs.spinner.classList.remove('is-hidden');\n  setTimeout(() => {\n    watchedMarkup();\n  }, 400);\n}\n\nfunction onQueueVideo() {\n  refs.queueBtn.setAttribute('disabled', true);\n  refs.watchedBtn.removeAttribute('disabled');\n  refs.addToWatchedBtn.textContent = 'Add to Watched';\n  refs.addToQueueBtn.textContent = 'Remove from Queue';\n  refs.addToWatchedBtn.removeEventListener('click', onDeleteWatched);\n  refs.addToQueueBtn.removeEventListener('click', addToQueue);\n  refs.addToQueueBtn.addEventListener('click', onDeleteQueue);\n  refs.addToWatchedBtn.addEventListener('click', addToWatched);\n  refs.queueBtn.classList.add('is-active');\n  refs.watchedBtn.classList.remove('is-active');\n  onRemoveWatched();\n  refs.spinner.classList.remove('is-hidden');\n  setTimeout(() => {\n    queueMarkup();\n  }, 400);\n}\nfunction addToQueue() {\n  const x = document.querySelector('.film__poster');\n  const y = document.querySelectorAll('.card__item');\n  y.forEach(li => {\n    if (x.id === li.id) {\n      addQueue.map(film => {\n        if (film.id === Number(li.id)) {\n          const x = addQueue.indexOf(film);\n          addWatched.push(film);\n          queue.push(film);\n          addQueue.splice(x, 1);\n          watched.splice(x, 1);\n          li.remove();\n          closeModal();\n          refs.spinner.classList.remove('is-hidden');\n\n          const savedWatced = localStorage.getItem('watched');\n          const parsedWatced = JSON.parse(savedWatced);\n          localStorage.removeItem('watched', parsedWatced);\n          localStorage.setItem('watched', JSON.stringify(watched));\n\n          const savedQueue = localStorage.getItem('queue');\n          const parsedQueue = JSON.parse(savedQueue);\n          localStorage.removeItem('queue', parsedQueue);\n          localStorage.setItem('queue', JSON.stringify(queue));\n          setTimeout(() => {\n            watchedMarkup();\n          }, 400);\n        }\n      });\n    }\n  });\n}\n\nfunction addToWatched() {\n  const x = document.querySelector('.film__poster');\n  const y = document.querySelectorAll('.card__item');\n  y.forEach(li => {\n    if (x.id === li.id) {\n      addWatched.map(film => {\n        if (film.id === Number(li.id)) {\n          const x = addWatched.indexOf(film);\n          addQueue.push(film);\n          watched.push(film);\n          addWatched.splice(x, 1);\n          queue.splice(x, 1);\n          li.remove();\n          closeModal();\n          refs.spinner.classList.remove('is-hidden');\n\n          const savedWatced = localStorage.getItem('watched');\n          const parsedWatced = JSON.parse(savedWatced);\n          localStorage.removeItem('watched', parsedWatced);\n          localStorage.setItem('watched', JSON.stringify(watched));\n\n          const savedQueue = localStorage.getItem('queue');\n          const parsedQueue = JSON.parse(savedQueue);\n          localStorage.removeItem('queue', parsedQueue);\n          localStorage.setItem('queue', JSON.stringify(queue));\n          setTimeout(() => {\n            queueMarkup();\n          }, 400);\n        }\n      });\n    }\n  });\n}\nfunction watchedMarkup() {\n  const savedFilm = localStorage.getItem('watched');\n  const parsedFilm = JSON.parse(savedFilm);\n\n  // parsedFilm.map(muvieId => {\n  //   filmsMarkup(muvieId);\n  // });\n  addPagination(parsedFilm);\n  refs.spinner.classList.add('is-hidden');\n}\n\nfunction queueMarkup() {\n  const savedFilm = localStorage.getItem('queue');\n  const parsedFilm = JSON.parse(savedFilm);\n  // parsedFilm.map(muvieId => {\n  //   filmsMarkup(muvieId);\n  // });\n  addPagination(parsedFilm);\n  refs.spinner.classList.add('is-hidden');\n}\n\nfunction onRemoveWatched() {\n  const remuve = document.querySelectorAll('.card__item');\n  remuve.forEach(li => {\n    li.remove();\n  });\n}\n\nfunction onRemoveQueue() {\n  const remuve = document.querySelectorAll('.card__item');\n  remuve.forEach(li => {\n    li.remove();\n  });\n}\n\nfunction onDeleteQueue() {\n  const x = document.querySelector('.film__poster');\n  const y = document.querySelectorAll('.card__item');\n  y.forEach(li => {\n    if (x.id === li.id) {\n      queue.map(film => {\n        if (film.id === Number(li.id)) {\n          const x = queue.indexOf(film);\n          queue.splice(x, 1);\n          li.remove();\n          closeModal();\n          refs.spinner.classList.remove('is-hidden');\n\n          const savedSettings = localStorage.getItem('queue');\n          const parsedSettings = JSON.parse(savedSettings);\n          localStorage.removeItem('queue', parsedSettings);\n\n          localStorage.setItem('queue', JSON.stringify(queue));\n\n          setTimeout(() => {\n            queueMarkup();\n          }, 400);\n        }\n      });\n    }\n  });\n}\n\nfunction onDeleteWatched() {\n  const x = document.querySelector('.film__poster');\n  const y = document.querySelectorAll('.card__item');\n  y.forEach(li => {\n    if (x.id === li.id) {\n      watched.map(film => {\n        if (film.id === Number(li.id)) {\n          const x = watched.indexOf(film);\n          watched.splice(x, 1);\n          li.remove();\n          closeModal();\n          refs.spinner.classList.remove('is-hidden');\n\n          const savedSettings = localStorage.getItem('watched');\n          const parsedSettings = JSON.parse(savedSettings);\n          localStorage.removeItem('watched', parsedSettings);\n\n          localStorage.setItem('watched', JSON.stringify(watched));\n          setTimeout(() => {\n            watchedMarkup();\n          }, 400);\n        }\n      });\n    }\n  });\n}\n"],"names":["parcelRequire","$l1RgP","default","$2XfcP","$390580d5074b6567$var$refs","$390580d5074b6567$export$2e2bcd8739ae039","array","totalPages","Math","ceil","length","page","films","slice","$390580d5074b6567$var$renderMarkupByPageOfLibrary","paginationEl","innerHTML","addEventListener","e","_page","target","closest","spinner","classList","remove","Number","id","setTimeout","window","scrollTo","top","add","markup","map","film","genres","name","join","$390580d5074b6567$var$getGenresOfFilm","concat","poster_path","original_title","noImage","title","release_date","vote_average","toFixed","popularFilmsList","$2f7b37cb6b9cf3e8$var$refs","$2f7b37cb6b9cf3e8$var$onQueueVideo","watchedBtn","setAttribute","queueBtn","removeAttribute","addToWatchedBtn","textContent","addToQueueBtn","removeEventListener","$2f7b37cb6b9cf3e8$var$onDeleteQueue","$2f7b37cb6b9cf3e8$var$addToWatched","$2f7b37cb6b9cf3e8$var$onDeleteWatched","$2f7b37cb6b9cf3e8$var$addToQueue","document","querySelectorAll","forEach","li","$2f7b37cb6b9cf3e8$var$watchedMarkup","$2f7b37cb6b9cf3e8$var$watched","$2f7b37cb6b9cf3e8$var$queue","$2f7b37cb6b9cf3e8$var$addWatched","$2f7b37cb6b9cf3e8$var$addQueue","$2f7b37cb6b9cf3e8$var$savedQueueFilm","localStorage","getItem","JSON","parse","muvieId","push","$2f7b37cb6b9cf3e8$var$savedWotchedFilm","$2f7b37cb6b9cf3e8$var$queueMarkup","x1","querySelector","x","indexOf","splice","$73ES2","savedWatced","parsedWatced","removeItem","setItem","stringify","savedQueue","parsedQueue","x2","savedFilm","x3","savedSettings","parsedSettings","x4"],"version":3,"file":"my-library.331477f7.js.map"}